<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>STELLA - Data Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&display=swap"
      rel="stylesheet"
    />
    <!-- <link rel="stylesheet" href="../lib/w3.css" /> -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
  </head>
  <body>
    <!-- LANDING AND ALL ITS ELEMENTS -->
    <div class="landing active" id="landing">
      <h1 id="title">stella_dataviewer</h1>
      <img src="images/stellaSpin.gif" class="introGif" id="spin" />
      <div class="landingNav">
        <div id="about">about</div>
        <label class="custom-file-upload">
          <input
            type="file"
            id="upload_file"
            accept=".txt, .csv"
            onclick="this.value=null;"
          />
          upload_file
        </label>
        <div id="plugInDevice">connect_device</div>
      </div>
    </div>

    <!-- USED TO DOWNLOAD SCREENSHOTS -->
    <a id="link"></a>

    <!-- HELP SCREEN -->
    <div class="helpContainer" id="helpContainer">
      <div class="helpHeader" id="helpHeader">
        <div class="close-icon" id="help_closeBtn">X</div>
        <h1>Help</h1>
        <!-- <h3>Because we can.</h3> -->
      </div>
      <div class="helpScroll">
        <!-- GRAPHS AND INDICES -->
        <div class="ac">
          
          <input class="ac-input" id="ac-1" name="ac-1" type="checkbox" />
          <label class="ac-label" for="ac-1">Graphs and Indices</label>
          
          <article class="ac-text">
            <div class="ac-sub">
              <input class="ac-input" id="ac-2" name="ac-2" type="checkbox" />
              <label class="ac-label" for="ac-2">'RAW'</label>
              <article class="ac-sub-text">
                <p>The <b>‘RAW’</b> graph refers to the direct unfiltered data received straight from the device.
                  It records values in irradiance at the following wavelengths:
                </p>
                <p>
                  <i>Visible</i>: <b>450nm, 500nm, 550nm, 570nm, 600nm, 650nm.</b>
                </p>
                <p>
                  <i>Near Infrared</i>: <b>610nm, 680nm, 730nm, 760nm, 810nm, 860nm.</b>
                </p>
                <p>
                  Toggling <b>‘Visible (filtered)’</b> or <b>‘Infrared (filtered)’</b> on top of the graph will show the current data points filtered through each sensor's calibration curve. 
                </p>
              </article>
            </div>
            
            <div class="ac-sub">
              <input class="ac-input" id="ac-3" name="ac-3" type="checkbox" />
              <label class="ac-label" for="ac-3">'NDVI'</label>
              <article class="ac-sub-text">
                <p><b>'NDVI'</b> <i>aka</i> <b>'Normalized Difference NIR/Red Vegetation Index'</b></p>
                <p><i>NDVI = (R_NIR - R_RED) / (R_NIR + R_RED)</i></p>
                <p>The output of NDVI is a range from <b>-1</b> to <b>+1</b> (low-high).
                  If NDVI returns a <b>negative</b> value, it's highly probable that your subject is water. 
                  If it returns a value close to <b>+1</b> there’s a good chance it is dense green vegetation. 
                  Values close to <b>zero</b> means there is likely no vegetation at all.</p>
                <p>NDVI has found broad applications in remote sensing for agricultural applications for crop biomass assessment and monitoring of the fraction of vegetation cover for a specific field. 
                  In agriculture, models based on NDVI are developed for prediction of winter wheat yield at large scale. 
                  In forestry, models for fire danger and using NDVI together with a suite of other biophysical and meteorological variables.</p>
              </article>
            </div>    
            <div class="ac-sub">
              <input class="ac-input" id="ac-NIRv" name="ac-NIRv" type="checkbox" />
              <label class="ac-label" for="ac-NIRv">'NIRv'</label>
              <article class="ac-sub-text">
                <p><b>'NIRv'</b> <i>aka</i> <b>'Near-infrared reflectance of vegetation (NIRV)'</b></p>
                <p><i>NIRv = NDVI*NIR</i></p>
              </article>
            </div>        
          </article><!--/ac-text-->
        </div><!--/ac-->
  
        <!-- HOW TO USE THIS APP -->
        <div class="ac">
          <input class="ac-input" id="ac-4" name="ac-4" type="checkbox" />
          <label class="ac-label" for="ac-4">How to use</label>
          <article class="ac-text">
            <div class="ac-sub">
              <input class="ac-input" id="ac-5" name="ac-5" type="checkbox" />
              <label class="ac-label" for="ac-5">'Connect Device'</label>
              <article class="ac-sub-text">
                <p>Content, Content, Content</p>
              </article>
            </div>
            <div class="ac-sub">
              <input class="ac-input" id="ac-6" name="ac-6" type="checkbox" />
              <label class="ac-label" for="ac-6">'Upload File'</label>
              <article class="ac-sub-text">
                <p>Content, Content, Content</p>
              </article>
            </div>
            
          </article><!--/ac-text-->
          
        </div><!--/ac-->
  
        <!-- FAQ -->
        <div class="ac">
          <input class="ac-input" id="ac-7" name="ac-7" type="checkbox" />
          <label class="ac-label" for="ac-7">FAQ</label>
          <article class="ac-text">
            <div class="ac-sub">
              <input class="ac-input" id="ac-8" name="ac-8" type="checkbox" />
              <label class="ac-label" for="ac-8">How do I download my data?</label>
              <article class="ac-sub-text">
                <p>Content, Content, Content</p>
              </article>
            </div>
            <div class="ac-sub">
              <input class="ac-input" id="ac-9" name="ac-9" type="checkbox" />
              <label class="ac-label" for="ac-9">'Upload File'</label>
              <article class="ac-sub-text">
                <p>Content, Content, Content</p>
              </article>
            </div>
            
          </article><!--/ac-text-->
          
        </div><!--/ac-->
      </div>
  
    </div>

    <!-- GRAPHS AND GRAPH CONTROLLERS-->
    <div class="chartCard" id="chartCard">
      <div class="chartBox" id="mainGraph">
        <canvas id="graph">
          <div id="canvasBG"></div>
        </canvas>
        <div class="boxContainer">
          <div class="timelineContainer active" id="timelineContainer">
            <input
              type="range"
              min="1"
              max="10"
              value="5"
              class="slider"
              id="myRange"
            />
            <div class="track">
              <div class="track-inner"></div>
            </div>
            <div class="box center pause" id="playPauseBtn"></div>
            <!-- <div class="frameNumber" id="timeStamp" style ="left: 0%">1/100</div> -->
          </div>
          <div class="arrow right active" id="arrowRight"></div>
          <div class="arrow left active" id="arrowLeft"></div>
          <!-- DOUBLE SIDED SLIDER -->
          <div slider id="slider-distance">
            <div>
              <div inverse-left></div>
              <div inverse-right></div>
              <div range style="left: 0%; right: 0%"></div>
              <span thumb id="editRange_thumb_start" style="left: 0%"></span>
              <span thumb id="editRange_thumb_end" style="left: 100%"></span>
              <div sign style="left: 0%">
                <span id="value">1</span>
              </div>
              <div sign style="left: 100%">
                <span id="value">4</span>
              </div>
            </div>
            <input
              type="range"
              id="editRange_start"
              tabindex="0"
              value="1"
              max="13"
              min="1"
              step="1"
            />
            <input
              type="range"
              id="editRange_end"
              tabindex="0"
              value="13"
              max="13"
              min="1"
              step="1"
            />
          </div>

          <div class="frameNumber" id="frameNumber">1/100</div>
        </div>

        <!-- BOTTOM RIGHT SIDEBAR FOR MULTIPLE BUTTONS -->
        <div class="editContainer">
          <div
            class="editIcon active"
            id="downloadBtn"
            title="Download batch data"
          >
            <i class="material-icons w3-large"> download </i>
          </div>
          <div class="editIcon active" id="trimIcon" title="Edit Current Batch">
            <i class="material-icons w3-xlarge"> content_cut </i>
          </div>
          <div
            class="editIcon active"
            id="unitsToggle"
            title="Toggle unit labels"
            style="z-index: 99"
          >
            <i class="material-icons w3-large"> equalizer </i>
          </div>
          <div
            class="editIcon active"
            id="visibility_raw"
            title="Toggle data labels"
            style="z-index: 99"
          >
            <i class="material-icons w3-large" id="visibleIcon_raw">
              visibility
            </i>
          </div>
          <!-- <input type="number" id="edit_start_input" name="quantity" min="1" max="5" value = "1"> -->
        </div>

        <!-- BOTTOM LEFT SIDEBAR FOR RECORDING GRAPH-->
        <div class="editContainer leftSided">
          <div class="recordContainer" id="recordContainer">
            <div class="record active" id="recordButton">
            </div>
            <div class="recordingText" id="recordingText"><b>Record</b></div>
          </div>
          <div class="editIcon active" id="snapshot" title="Take a screenshot of the current graph">
            <i class="material-icons w3-xlarge"> camera_alt </i>
          </div>
        </div>

        <div class="modeContainer">
          <div
            class="dataMode selected"
            id="rawData"
            title="Graph of RAW data from the device"
          >
            <b>Raw Data</b>
          </div>

          <div
            class="dataMode"
            id="visible_filter"
            title="Visible Calibration Curve"
          >
            <b>Visible (filtered)</b>
          </div>

          <div
            class="dataMode"
            id="infrared_filter"
            title="Infrared Calibration Curve"
          >
            <b>Infrared (filtered)</b>
          </div>

          <!-- <div class="record" id="recordButton">
            <div class="recordingText" id="recordingText"><b>Record</b></div>
          </div> -->
        </div>
      </div>
      <div class="chartBox" id="calcGraph">
        <canvas id="graph2"> </canvas>
        <div class="editContainer">
          <div
            class="editIcon active"
            id="visibility_ndvi"
            title="Toggle data labels"
          >
            <i class="material-icons w3-large" id="visibleIcon_ndvi">
              visibility
            </i>
          </div>
        </div>

        <!-- BOTTOM LEFT SIDEBAR FOR RECORDING GRAPH-->
        <div class="editContainer leftSided">
          <div class="editIcon active" id="snapshot_2" title="Take a screenshot of the current graph">
            <i class="material-icons w3-xlarge"> camera_alt </i>
          </div>
        </div>
      </div>
      <div class="chartBox" id="NIRv_Graph">
        <canvas id="graph_NIRv"> </canvas>
        <div class="editContainer">
          <div
            class="editIcon active"
            id="visibility_nirv"
            title="Toggle data labels"
          >
            <i class="material-icons w3-large" id="visibleIcon_nirv">
              visibility
            </i>
          </div>
        </div>

        <!-- BOTTOM LEFT SIDEBAR FOR RECORDING GRAPH-->
        <div class="editContainer leftSided">
          <div class="editIcon active" id="snapshot_3" title="Take a screenshot of the current graph">
            <i class="material-icons w3-xlarge"> camera_alt </i>
          </div>
        </div>
      </div>
      <div class="chartBox" id="SR_Graph">
        <canvas id="graph_SR"> </canvas>
        <div class="editContainer">
          <div
            class="editIcon active"
            id="visibility_sr"
            title="Toggle data labels"
          >
            <i class="material-icons w3-large" id="visibilityIcon_sr">
              visibility
            </i>
          </div>
        </div>

        <!-- BOTTOM LEFT SIDEBAR FOR RECORDING GRAPH-->
        <div class="editContainer leftSided">
          <div class="editIcon active" id="snapshot_4" title="Take a screenshot of the current graph">
            <i class="material-icons w3-xlarge"> camera_alt </i>
          </div>
        </div>
      </div>
    </div>

    <!-- MENU BUTTON -->

    <div class="editContainer disable" id="menuContainer" style="top: 1%; right: 1%;">
      <div class="editIcon" id="help" 
      style=
      "height: 2vw;
      width: 2vw;">
        <!-- <b>Menu</b> -->
        <i class="material-icons w3-xlarge" style="font-size: 2vw;"> help_outline </i>
      </div>
      <div class="editIcon" id="menu" 
      style=
      "height: 2vw;
      width: 2vw;">
        <!-- <b>Menu</b> -->
        <i class="material-icons w3-xlarge" style="font-size: 2vw;"> home </i>
      </div>
    </div>

    <!-- SCREEN RECORDING -->
    <!-- <div class="record" id="recordButton">
      <div class="recordingText" id="recordingText">Record</div>
    </div> -->

    <h2 class="" id="descriptionText" style="opacity: 0%">
      FILTERED VISIBLE LIGHT
    </h2>

    <!-- DATA_STREAM READ BUTTON -->
    <div class="newFile" id="read" style="bottom: -75%; right: 0%">
      <b>read</b>
    </div>

    <!-- LIVE DUPLICATE SCREEN-->
    <div
      class="chartCard"
      id="chartCardLive"
      style="grid-template-columns: minmax(200px, 1fr) minmax(200px, 1fr)"
    >
      <div class="chartBox" id="liveGraph">
        <canvas id="graph3"> </canvas>
        <div class="editContainer">
          <div
            class="editIcon active"
            id="units_live_toggle"
            title="Toggle unit labels"
            style="z-index: 99"
          >
            <i class="material-icons w3-large"> equalizer </i>
          </div>
          <div
            class="editIcon active"
            id="visible_raw_live"
            title="Toggle data labels"
            style="z-index: 99"
          >
            <i class="material-icons w3-large" id="visibleIcon_raw_live">
              visibility
            </i>
          </div>
          <!-- <input type="number" id="edit_start_input" name="quantity" min="1" max="5" value = "1"> -->
        </div>
      </div>
      <div class="duplicateScreen" id="duplicateScreen">
        <div id="batchNmb_label" class="batchNmb">0.9</div>
        <div id="recording_label" class="recording pause"></div>

        <div id="UID_label">UID: 8535</div>
        <div id="date_label">2020-12-07</div>
        <div id="timestamp_label">13:35:19Z</div>
        <div id="surfaceTemp_label">Surface: 21.0C</div>
        <div>nm: uW/cm^2</div>
        <div id="airTemp_label">Air: 20.4C</div>
        <div id="v450_label">V450: 8.9</div>
        <div id="610_label">610: 1.4</div>
        <div id="b500_label">B500: 11.8</div>
        <div id="680_label">680: 1.1</div>
        <div id="g550_label">G550: 10.2</div>
        <div id="730_label">730: 1.1</div>
        <div id="y570_label">Y570: 10.5</div>
        <div id="760_label">760: 1.1</div>
        <div id="o600_label">O600: 10.5</div>
        <div id="810_label">810: 1.0</div>
        <div id="r650_label">R650: 11.1</div>
        <div id="860_label">860: 1.3</div>
      </div>
    </div>

    <div class="controlSidebar" id="controlSidebar">
      <div class="controlSidebarheader" id="controlSidebarheader"></div>
      <h1>graphs</h1>
      <h1>#batch</h1>
      <h1 id="dateHeader">2022/12/05</h1>
      <h1 style="font-size: 100%">distance(cm):</h1>
      <div class="batchGrid" id="graphs">
        <div id="graphs_raw" class="active selected" title="RAW data from the device">
          RAW
        </div>
        <div
          id="graphs_ndvi"
          class="active"
          title="An indicator of density and health in vegetation"
        >
          NDVI
        </div>
        <div id="graphs_SR" class="active">
          SR
        </div>
        <div id="graphs_nirv" class=" ">
          NIRv
        </div>
      </div>
      <div class="batchGrid" id="batchGrid"></div>
      <div class="extraInfo">
        <div id="Time">time: 10:20:30:40</div>
        <div id="air_temp">air_temp: 23.7 C</div>
        <div id="surface_temp">surface_temp: 20.8 C</div>
        <div id="relative_humidity">relative_humidity: 3%</div>
        <div id="battery_voltage">battery_voltage: 3.81 V</div>
        <div id="UID">UID: 3875</div>
      </div>
      <div class="userInputContainer">
        <input type="number" id="distanceInput" value="1" step="0.1" min="0" />
        <h1>calibration batch:</h1>
        <div class="batchGrid" id="calibration_batch_grid"></div>
      </div>

      <!-- <div class="fav_batch" id="fav_batch" title="Select Calibration Batch">
        <i class="material-icons w3-large"> star_border </i>
      </div> -->
    </div>

    <div
      class="controlSidebar"
      id="controlSidebar_live"
      style="
        grid-template-columns: minmax(1px, 1fr);
        grid-template-rows: minmax(0.4fr, 1fr);
        width: 10%;
        min-width: 5rem;
      "
    >
      <div class="controlSidebarheader" id="controlSidebarheader_live"></div>
      <h1>graphs</h1>
      <!-- <h1 id="dateHeader">2022/12/05</h1> -->
      <div class="batchGrid" id="graphs">
        <div
          id="graphs_raw_live"
          class="selected"
          title="RAW data from the device"
        >
          RAW
        </div>
        <div
          id="graphs_duplicate_live"
          class="selected"
          title="A duplicate screen from the device"
        >
          SCREEN
        </div>
      </div>
      <!-- <div class="extraInfo">
        <div id="batch_live">batch: 2</div>
        <div id="UID_live">UID: 3875</div>
      </div> -->
    </div>

    <!--TEST SLIDER-->
    <!-- <div slider id="slider-distance">
      <div>
        <div inverse-left style="width:80%;"></div>
        <div inverse-right style="width:80%;"></div>
        <div range style="left:0%;right:0%;"></div>
        <span thumb style="left:0%;"></span>
        <span thumb style="left:100%;"></span>
      </div>
      <input type="range" id="editRange_start" tabindex="0" value="0" max="50" min="0" step="1"/>
      <input type="range" id="editRange_end" tabindex="0" value="50" max="50" min="0" step="1"/>
    </div> -->

    <script type="module" src="/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  </body>
</html>
